{{ define "main" }}
<div class="max-w-none" role="main">
  <!-- Breadcrumbs -->
  <div class="breadcrumbs text-sm mb-6">
    <ul class="flex-nowrap">
      <li><a href="/">Home</a></li>
      <li>{{ .Title }}</li>
    </ul>
  </div>
  
  {{ partial "list-header.html" . }}
  
  <!-- Determine card type based on section -->
  {{ $cardType := "card-list" }}
  {{ $items := .Paginator.Pages }}
  {{ $showPagination := true }}
  {{ $sectionTitle := "" }}
  
  {{ if eq .Type "posts" }}
    {{ $cardType = "card-list" }}
    {{ if not .Paginator }}
      {{ $items = first 6 (where site.RegularPages "Type" "posts") }}
      {{ $showPagination = false }}
      {{ $sectionTitle = "Recent Posts" }}
    {{ end }}
  {{ else if eq .Type "portfolio" }}
    {{ $cardType = "card-portfolio" }}
  {{ else if eq .Type "tools" }}
    {{ $cardType = "card-portfolio" }}
  {{ end }}
  
  <!-- Section with title if needed -->
  {{ if $sectionTitle }}
  <section>
    <h2 class="text-2xl lg:text-3xl font-semibold text-secondary mb-6 lg:mb-8">{{ $sectionTitle }}</h2>
    <div class="grid gap-6 lg:gap-8">
      {{ range $items }}
        {{ partial (printf "components/%s.html" $cardType) . }}
      {{ end }}
    </div>
  </section>
  {{ else }}
    <!-- Regular grid layout -->
    <div class="grid gap-6 lg:gap-8">
      {{ range $items }}
        {{ partial (printf "components/%s.html" $cardType) . }}
      {{ end }}
    </div>
  {{ end }}
  
  <!-- Pagination or View All button -->
  {{ if $showPagination }}
    {{ partial "list-pagination.html" . }}
  {{ else if eq .Type "posts" }}
    <div class="text-center mt-12">
      <a href="/posts" class="btn btn-primary btn-lg">
        View All Posts
        <svg xmlns="http://www.w0.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  {{ end }}
</div>
{{ end }}