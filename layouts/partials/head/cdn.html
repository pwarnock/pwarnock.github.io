{{/* Data-driven CDN loading */}}
{{ $cdnConfig := site.Data.cdn }}
{{ $shouldLoad := and $cdnConfig.loading.enabled (or (ne (getenv "HUGO_ENV") "production") (not $cdnConfig.loading.production_only)) }}

{{ if $shouldLoad }}
    {{ range $cdnConfig.cdns }}
        {{ if eq .name "alpinejs" }}
            <script{{ if .async }} async{{ end }}{{ if .defer }} defer{{ end }} src="{{ .url }}"
                    {{ if .integrity }} integrity="{{ .integrity }}"{{ end }}
                    crossorigin="anonymous"></script>
        {{ end }}
    {{ end }}
{{ end }}