{{/* Default data */}}
{{ $logo := "img/default-logo.svg" }}
{{ $logoLink := "/" }}
{{ $title := "#hugo-porto" }}

{{ $buttonEnabled := false }}
{{ $buttonText := "Download CV" }}
{{ $buttonLink := "#" }}
{{ $buttonTarget := "_blank" }}

{{ $menu := slice
  (dict "link" "/" "target" "_self" "text" "Home" "description" "Navigate to home page")
  (dict "link" "/posts" "target" "_self" "text" "Posts" "description" "Navigate to posts section")
  (dict "link" "/tags" "target" "_self" "text" "Tags" "description" "Navigate to tags section")
}}

{{/* Custom data from configuration file */}}
{{ with site.Data.navbar }}
  {{ $menu = slice }}
  {{ $buttonEnabled = false }}
  {{ if .menu }}{{ $menu = .menu }}{{ end }}
  {{ if .title }}{{ $title = .title }}{{ end }}
  {{ if .logo }}{{ $logo = .logo }}{{ end }}
  {{ if .logoLink }}{{ $logoLink = .logoLink }}{{ else if .site.BaseURL }}{{ $logoLink = .site.BaseURL }}{{ end }}
  {{ if .button }}
    {{ if .button.enabled }}{{ $buttonEnabled = .button.enabled }}{{ end }}
    {{ if .button.text }}{{ $buttonText = .button.text }}{{ end }}
    {{ if .button.link }}{{ $buttonLink = .button.link }}{{ end }}
    {{ if .button.target }}{{ $buttonTarget = .button.target }}{{ end }}
  {{ end }}
{{ end }}

{{/* If logo is a local asset, resize */}}
{{ $logoResource := resources.Get $logo }}
{{ if $logoResource }}
  {{ if eq $logoResource.MediaType.SubType "svg" }}
    {{ $logo = $logoResource.RelPermalink }}
  {{ else }}
    {{ $logo = ($logoResource.Resize "100x100").RelPermalink }}
  {{ end }}
{{ end }}

{{ if and $buttonEnabled (eq $buttonLink "#") }}
{{ $cvResource := resources.Get "/files/cv.pdf" }}
{{ if $cvResource }}
{{ $buttonLink = $cvResource.RelPermalink }}
{{ else }}
{{ $buttonEnabled = false }}
{{ end }}
{{ end }}


<div class="flex items-center justify-between py-5">
  <div class="flex items-center">
    <a href="{{ $logoLink }}">
      <img src="{{ $logo }}" class="py-5 w-10 lg:w-14 min-w-10" alt="{{ $title }}" title="{{ $title }}" />
    </a>
    <a href="{{ $logoLink }}">
      <h1 class="text-lg lg:text-xl px-2 lg:px-3 font-medium text-base-content">{{ $title }}</h1>
    </a>
  </div>
  <div class="hidden lg:block">
    <ul class="flex items-center">
      {{ range $menu }}
        {{ if (default true .enabled) }}
        <li class="px-5">
          <a
            href="{{ .link }}"
            alt="{{ .description }}"
            title="{{ .description }}"
            target="{{ .target }}"
            class="cursor-pointer font-normal text-base text-base-content">
            {{ .text }}
          </a>
        </li>
        {{ end }}
      {{ end }}
      {{ if $buttonEnabled }}
        <li class="px-5">
          <a href="{{ $buttonLink }}" target="{{ $buttonTarget }}">
            <button
              class="px-10 py-4 bg-base-100 hover:bg-base-300 hover:text-base-content rounded-lg font-normal text-base transition duration-300">
              {{ $buttonText }}
            </button>
          </a>
        </li>
      {{ end }}
      <li class="px-5">
        <button
          @click="nextTheme"
          class="p-3 rounded-lg bg-base-200 hover:bg-base-300 transition-colors border border-base-300 cursor-pointer"
          aria-label="Cycle theme">
          <i class="bx bx-palette text-xl text-base-content" aria-hidden="true"></i>
        </button>
      </li>
    </ul>
  </div>

  <div class="flex items-center lg:hidden mt-2 space-x-3">
    <button
      @click="nextTheme"
      class="p-3 rounded-lg bg-base-200 hover:bg-base-300 transition-colors border border-base-300 cursor-pointer"
      aria-label="Cycle theme">
      <i class="bx bx-palette text-xl text-base-content" aria-hidden="true"></i>
    </button>
    <label for="my-drawer-3" aria-label="open sidebar" class="btn btn-square btn-ghost lg:hidden">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-6 h-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </label>


<div class="drawer-side">
  <label for="my-drawer-3" aria-label="close sidebar" class="drawer-overlay"></label>
  <ul class="menu p-4 w-80 min-h-full bg-base-200">
    {{ range $menu }}
      {{ if (default true .enabled) }}
      <li>
        <a
          href="{{ .link }}"
          alt="{{ .description }}"
          title="{{ .description }}"
          target="{{ .target }}"
          class="cursor-pointer font-normal text-base-content">
          {{ .text }}
        </a>
      </li>
      {{ end }}
    {{ end }}
    {{ if $buttonEnabled }}
    <li>
      <a href="{{ $buttonLink }}" target="_blank" class="cursor-pointer font-normal text-base-content">
        Get my CV
      </a>
    </li>
    {{ end }}
    <li>
      <button
        @click="nextTheme"
        class="p-3 rounded-lg bg-base-200 hover:bg-base-300 transition-colors border border-base-300 cursor-pointer"
        aria-label="Cycle theme">
        <i class="bx bx-palette text-xl text-base-content" aria-hidden="true"></i>
      </button>
    </li>
  </ul>
</div>


