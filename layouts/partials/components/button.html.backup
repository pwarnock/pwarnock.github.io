{{/* Unified Button Component - Replaces 42 hardcoded button patterns */}}
{{ $variant := .variant | default "primary" }}
{{ $size := .size | default "md" }}
{{ $href := .href }}
{{ $text := .text }}
{{ $icon := .icon }}
{{ $disabled := .disabled | default false }}
{{ $class := .class | default "" }}
{{ $ariaLabel := .ariaLabel }}
{{ $type := .type | default "button" }}
{{ $onclick := .onclick }}

{{/* Build CSS classes */}}
{{ $classes := slice "btn-system" }}
{{ $classes = $classes | append (printf "btn-system--%s" $variant) }}
{{ $classes = $classes | append (printf "btn-system--%s" $size) }}
{{ $classes = $classes | append $class }}

{{/* Build attributes */}}
{{ $attributes := dict "class" (delimit $classes " ") }}
{{ if $disabled }}
  {{ $attributes = merge $attributes (dict "disabled" "true" "aria-disabled" "true") }}
{{ end }}
{{ if $ariaLabel }}
  {{ $attributes = merge $attributes (dict "aria-label" $ariaLabel) }}
{{ end }}
{{ if $onclick }}
  {{ $attributes = merge $attributes (dict "onclick" $onclick) }}
{{ end }}

{{/* Render button or link */}}
{{ if $href }}
  <a href="{{ $href }}" {{ range $key, $value := $attributes }}{{ $key }}="{{ $value }}" {{ end }} role="button">
    {{ if $icon }}
      <span class="icon-system icon-system--{{ $size }}">
        {{ if eq (printf "%T" $icon) "string" }}
          {{ partial "components/icon.html" (dict "name" $icon "size" $size) }}
        {{ else }}
          {{ $icon }}
        {{ end }}
      </span>
    {{ end }}
    {{ if $text }}{{ $text }}{{ end }}
    {{ if .slot }}{{ .slot }}{{ end }}
  </a>
{{ else }}
  <button type="{{ $type }}" {{ range $key, $value := $attributes }}{{ $key }}="{{ $value }}" {{ end }}>
    {{ if $icon }}
      <span class="icon-system icon-system--{{ $size }}">
        {{ if eq (printf "%T" $icon) "string" }}
          {{ partial "components/icon.html" (dict "name" $icon "size" $size) }}
        {{ else }}
          {{ $icon }}
        {{ end }}
      </span>
    {{ end }}
    {{ if $text }}{{ $text }}{{ end }}
    {{ if .slot }}{{ .slot }}{{ end }}
  </button>
{{ end }}