<article class="card lg:card-side bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300" role="article">
  {{/* Blog post image - using DaisyUI card-side layout */}}
  {{ $image := .Params.thumbnail | default .Params.image }}
  {{ if $image }}
  <figure class="p-4">
    <a href="{{ .Permalink }}" class="block hover:opacity-90 transition-opacity">
      {{/* Try to get as page resource first, then fall back to static */}}
      {{ with .Resources.GetMatch (strings.TrimPrefix "/" $image) }}
        {{ with .Fit "200x150" }}
          <img src="{{ .RelPermalink }}" alt="{{ .Title }}" class="w-60 h-48 lg:w-48 lg:h-36 object-cover rounded-lg shadow-md" loading="lazy" />
        {{ else }}
          <img src="{{ .RelPermalink }}" alt="{{ .Title }}" class="w-60 h-48 lg:w-48 lg:h-36 object-cover rounded-lg shadow-md" loading="lazy" />
        {{ end }}
      {{ else }}
        {{/* For static images, check if it needs /images/blog/ prefix */}}
        {{ $imagePath := $image }}
        {{ if not (hasPrefix $image "/") }}
          {{ $imagePath = printf "/images/blog/%s" $image }}
        {{ end }}
        <img src="{{ $imagePath | relURL }}" alt="{{ .Title }}" class="w-60 h-48 lg:w-48 lg:h-36 object-cover rounded-lg shadow-md" loading="lazy" />
      {{ end }}
    </a>
  </figure>
  {{ end }}

  <div class="card-body">
    <div class="flex flex-col gap-2 mb-4">
      <h2 class="card-title text-xl lg:text-2xl">
        <a href="{{ .Permalink }}" class="link link-hover text-accent no-underline hover:underline">
          {{ .Title }}
        </a>
      </h2>
      {{ if .Params.tags }}
      <div class="flex flex-wrap gap-2">
        {{ range .Params.tags }}
        <span class="badge badge-outline badge-secondary text-xs">{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
    </div>

    <div class="prose prose-sm text-base-content/80">
      {{ if .Params.summary }}
      <p class="line-clamp-4">{{ .Params.summary }}</p>
      {{ else }}
      <p class="line-clamp-4">{{ .Summary }}</p>
      {{ end }}
    </div>

    <div class="card-actions justify-between items-center">
      <div class="text-sm text-base-content/60">
        <time datetime="{{ .Date.Format "2006-01-02" }}" class="flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          {{ .Date.Format "January 2, 2006" }}
        </time>
        {{ if .Params.readingTime }}
        <span class="flex items-center gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          {{ .Params.readingTime }} min
        </span>
        {{ end }}
      </div>

      <a href="{{ .Permalink }}" class="btn btn-primary btn-sm hover:btn-primary-focus transition-colors">
        Read More
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>
</article>
